<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:components="clr-namespace:BankKingWPF.UI.Components">

    <Style x:Key="NoButtonExpanderStyle" TargetType="Expander">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Expander">
                    <DockPanel HorizontalAlignment="Stretch">
                        <!-- Header: We keep the ToggleButton for click behavior, 
                         but re-template it to remove the arrow graphic. -->
                        <ToggleButton DockPanel.Dock="Top"
                                  IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                  Content="{TemplateBinding Header}"
                                  ContentTemplate="{TemplateBinding HeaderTemplate}"
                                  Padding="{TemplateBinding Padding}"
                                  HorizontalAlignment="Stretch">
                            <ToggleButton.Template>
                                <ControlTemplate TargetType="ToggleButton">
                                    <!-- The background is Transparent to ensure clicks are caught -->
                                    <Border Background="Transparent" Padding="{TemplateBinding Padding}">
                                        <ContentPresenter Content="{TemplateBinding Content}" 
                                                      ContentTemplate="{TemplateBinding ContentTemplate}"
                                                      HorizontalAlignment="Stretch" 
                                                      VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>

                        <!-- Body Content -->
                        <ContentPresenter x:Name="ExpanderContent"
                                      DockPanel.Dock="Bottom"
                                      Content="{TemplateBinding Content}"
                                      ContentTemplate="{TemplateBinding ContentTemplate}"
                                      Visibility="Collapsed" />
                    </DockPanel>

                    <!-- Trigger to Show/Hide content -->
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsExpanded" Value="True">
                            <Setter TargetName="ExpanderContent" Property="Visibility" Value="Visible" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="HistoryHeader" TargetType="{x:Type GroupItem}">
        <Setter Property="Margin" Value="0,0,0,0"/>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type GroupItem}">

                    <Expander IsExpanded="True" Margin="0,0,0,0" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Style="{StaticResource NoButtonExpanderStyle}">

                        <!-- Use your Custom Header UserControl -->
                        <Expander.Header>
                            <components:HistoryHeader/>
                        </Expander.Header>

                        <Expander.Content>
                            <ItemsPresenter />
                        </Expander.Content>

                    </Expander>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>