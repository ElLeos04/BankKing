<UserControl
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
            xmlns:local="clr-namespace:BankKing.Interface.Components"
            xmlns:Entry="clr-namespace:BankKingData.Entry;assembly=BankKingData"
            xmlns:viewmodel="clr-namespace:BankKing.ViewModel"
            x:Class="BankKing.Interface.Components.AcountDetails"
            mc:Ignorable="d" Width="300" d:Height="994"
            d:DataContext="{d:DesignInstance Type=viewmodel:AccountViewModel, IsDesignTimeCreatable=True}">
    <Border BorderThickness="0" Background="{DynamicResource DarkPanelBrush}" CornerRadius="12">
        <Grid>
            <Grid x:Name="HeaderPanel" Height="280" VerticalAlignment="Top">
                <TextBlock HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,33,0,0"
                           TextWrapping="Wrap" TextAlignment="Center"
                           FontFamily="{DynamicResource AppFontFamily}" FontSize="32" Foreground="{DynamicResource DarkAccentBrush}"
                           Text="{Binding Name}"/>

                <TextBlock TextWrapping="Wrap" HorizontalAlignment="Center" VerticalAlignment="Top" FontFamily="{DynamicResource AppFontFamily}" FontSize="32" Foreground="{DynamicResource DarkAccentBrush}" Margin="0,100,0,0"
                           Text="{Binding BalanceText}"/>

                <!-- TODO: Réactiver et faire fonctionner le résumé du mois
                <Grid Height="60" VerticalAlignment="Bottom" Margin="0,0,0,40">
                    <TextBlock HorizontalAlignment="Left" Margin="10,10,0,0" TextWrapping="Wrap" Text="Revenus du mois" VerticalAlignment="Top" FontFamily="{DynamicResource AppFontFamily}" Foreground="{DynamicResource DarkAccentBrush}" FontSize="14"/>
                    <TextBlock HorizontalAlignment="Right" Margin="0,10,10,0" TextWrapping="Wrap" Text="Dépenses du mois" VerticalAlignment="Top" FontFamily="{DynamicResource AppFontFamily}" Foreground="{DynamicResource DarkAccentBrush}" FontSize="14"/>
                    <TextBlock HorizontalAlignment="Left" Margin="10,27,0,0" TextWrapping="Wrap" Text="+ 0,00€" VerticalAlignment="Top" FontFamily="{DynamicResource AppFontFamily}" Foreground="{DynamicResource PositiveValueBrush}" FontSize="14"/>
                    <TextBlock HorizontalAlignment="Right" Margin="0,27,10,0" TextWrapping="Wrap" Text="- 0,00€" VerticalAlignment="Top" FontFamily="{DynamicResource AppFontFamily}" Foreground="{DynamicResource NegativeValueBrush}" FontSize="14"/>
                </Grid>
                <Button Style="{StaticResource RoundedButtonStyle}" Height="25" VerticalAlignment="Bottom" Margin="0,0,0,15" Width="170">
                    <TextBlock Text="Statistiques Détaillées" FontFamily="{DynamicResource AppFontFamily}" FontSize="14" Foreground="{DynamicResource DarkAccentBrush}"
                               TextAlignment="Center"/>
                </Button>
                -->
            </Grid>

            <Grid x:Name="ContentPanel" Margin="0,280,0,110">
                <Border BorderBrush="{DynamicResource LightAccentBrush}" Background="{DynamicResource PanelBrush}" BorderThickness="2" CornerRadius="8,8,8,8" Margin="10,0,10,0">
                    <Grid x:Name="HistoryGridPanel">
                        <Border Name="mask" Background="{DynamicResource PanelBrush}" CornerRadius="14"/>

                        <ScrollViewer Style="{StaticResource FavsScrollViewer}">
                            <ScrollViewer.OpacityMask>
                                <VisualBrush Visual="{Binding ElementName=mask}"/>
                            </ScrollViewer.OpacityMask>

                            <ItemsControl ItemsSource="{Binding GroupedEntries}">
                                <ItemsControl.GroupStyle>
                                    <GroupStyle ContainerStyle="{StaticResource HistoryHeader}"/>
                                </ItemsControl.GroupStyle>

                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>

                                <ItemsControl.ItemTemplate>
                                    <DataTemplate DataType="{x:Type Entry:AccountEntryData}">
                                        <local:HistoryEntry/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>

                </Border>
            </Grid>

            <Grid x:Name="FooterPanel" Height="110" VerticalAlignment="Bottom">
                <Button Style="{StaticResource RoundedButtonStyle}"  HorizontalAlignment="Center" Margin="0,10,0,0" VerticalAlignment="Top" Width="170" Height="40"
                        Command="{Binding AddTransactionCommand}">
                    <TextBlock Text="Ajouter Transaction" FontFamily="{DynamicResource AppFontFamily}" FontSize="14" Foreground="{DynamicResource DarkAccentBrush}"
                               TextAlignment="Center"/>
                </Button>

                <!-- TODO: Faire fonctionner les transactions récurrentes
                <Button Style="{StaticResource RoundedButtonStyle}"  HorizontalAlignment="Center" Margin="0,60,0,0" VerticalAlignment="Top" Width="170" Height="40">
                    <TextBlock Text="Ajouter Transaction Récurrente" FontFamily="{DynamicResource AppFontFamily}" FontSize="14" Foreground="{DynamicResource DarkAccentBrush}"
                               TextWrapping="Wrap" TextAlignment="Center"/>
                </Button>
                -->
            </Grid>
        </Grid>
    </Border>
</UserControl>
